{% extends 'profileTemplate.html.twig' %}

{% block head %}
    {{ parent() }}

    <link rel="icon" href="{{ preload(asset('assets/img/favicon/cropped-cropped-logo-trust-and-market-32x32.png')) }}"
          sizes="32x32"/>
    <link rel="icon" href="{{ preload(asset('assets/img/favicon/cropped-cropped-logo-trust-and-market-192x192.png')) }}"
          sizes="192x192"/>
    <link rel="apple-touch-icon-precomposed"
          href="{{ preload(asset('assets/img/favicon/cropped-cropped-logo-trust-and-market-180x180.png')) }}"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <meta name="msapplication-TileImage"
          content="{{ preload(asset('assets/img/favicon/cropped-cropped-logo-trust-and-market-270x270.png')) }}"/>
    <meta name="robots" content="noindex">


{% endblock %}

{% block title %}
    Trust &amp; Market | {{ 'profil-utilisateur.liens.titre-page'|trans }}{% endblock %}
{% block style %}
    {{ parent() }}
    <link href="{{ preload(asset('assets/css/custome.css')) }}" rel="stylesheet">
    <link href="{{ absolute_url(asset('assets/css/style.css')) }}" rel="stylesheet">
    <link href="{{ preload(asset('assets/css/style-profile.css')) }}" rel="stylesheet">
    <!-- Custom css for input tag -->
    <link rel="stylesheet" href="{{ preload(asset('assets/css/tagsinput/tagify.css')) }}">
    <link rel="stylesheet" href="{{ asset('toastr/toastr.min.css') }}">
    <link rel="stylesheet" href="{{ asset('admin/assets/css/loading-btn.css') }}">
    <link rel="stylesheet" href="{{ asset('admin/assets/css/loading.css') }}">
    <link rel="stylesheet" href="{{ asset('assets/phone/css/intlTelInput.css') }}">
    <link rel="stylesheet" href="{{ asset('admin/assets/sweetalert/sweetalert.css') }}">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css"/>
    <!-- Custom css for camroll -->
    <link href="{{ asset('assets/css/camroll/camroll_slider.css') }}" rel="stylesheet" type="text/css">
    <!-- Crop css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css" integrity="sha512-cyzxRvewl+FOKTtpBzYjW6x6IAYUCZy3sGP40hn+DQkqeluGRCax7qztK2ImL64SA+C7kVWdLI6wvdlStawhyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <!-- owl carousel css -->
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css">
    <link rel="stylesheet" type="text/css"
          href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css">
    <style>
        user-info-text {
            font-size: 14px;
            font-family: 'Source Sans Pro', "Helvetica Neue", Helvetica, Arial, sans-serif;
            word-break: break-word;
            color: black;
        }

        .mimic-label {
            font-family: Roboto, sans-serif;
            font-weight: 300;
            color: #757575;
        }
        .image_area {
            position: relative;
        }

        img {
            display: block;
            max-width: 100%;
        }

        .preview {
            overflow: hidden;
            width: 160px;
            height: 160px;
            margin: 10px;
            border: 1px solid red;
            float: right;
        }

        .modal-lg{
            max-width: 1000px !important;
        }

        .overlay {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            background-color: rgba(255, 255, 255, 0.5);
            overflow: hidden;
            height: 0;
            transition: .5s ease;
            width: 100%;
        }

        .image_area:hover .overlay {
            height: 50%;
            cursor: pointer;
        }

        .text {
            color: #333;
            font-size: 20px;
            position: absolute;
            top: 50%;
            left: 50%;
            -webkit-transform: translate(-50%, -50%);
            -ms-transform: translate(-50%, -50%);
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .modal-title{
            font-family: "Source Sans Pro", "Helvetica Neue", Helvetica, Arial, sans-serif;
            text-align: center;
        }

        .modal-content{
            border-radius: 5px;
        }

        .modal-body{
            width: 95%;
            margin: auto;
        }

        .modal-footer{
            display: block;
        }

        .modal-footer .btn-warning{
            float: left;
            background-color: #262626 !important;
        }

        .modal-footer .btn-primary{
            float: right;
        }
        strong {
             font-weight: bold;
        }
        .cropper-container{
            width: 100%;
        }

        #topBtn {
            /*bottom: 0px !important;*/
        }

        /* Extra small devices (portrait phones, less than 576px) */
        @media (max-width: 575.98px) {
            main, .container {
                margin-top: 70px;
            }

            .preview {
                overflow: hidden;
                width: 200px;
                height: 200px;
                border: 1px solid red;
                margin: auto;
                float: none;
            }

            .image-bloc{
                margin-top: 25px;
            }
        }

        /* Small devices (landscape phones, 576px and up) */
        @media (min-width: 576px) and (max-width: 767.98px) {
            main, .container {
                margin-top: 100px;
            }

            .modal-content{
                border-radius: 5px;
            }

            .modal-body{
                width: 95%;
                margin: auto;
            }

            .modal-footer{
                display: block;
            }

            .modal-footer .cancel{
                float: left;
                font-size: large;
            }

            .modal-footer .approve{
                float: right;
                font-size: large;
            }

            .image-bloc{
                margin-top: 25px;
            }

            .preview {
                overflow: hidden;
                width: 200px;
                height: 200px;
                border: 1px solid red;
                margin: auto;
                float: none;
            }
        }
    </style>
{% endblock %}
{% block header %}
    {{ parent() }}
{% endblock %}
{% block navigation %}{% endblock %}
{% block body %}
    <div class="flex-fill container">
        <main class="">
            <div class="container mt-2 pt-4">
                {% include 'menuProfile.html.twig' %}
                <div class="mb-3">
                    {% for message in app.flashes('noticeErrorDate') %}
                        <div class="col-md-12 alert alert-warning alert-dismissible fade show" role="alert">
                            <span>{{ message }}</span>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    {% endfor %}
                    {% for message in app.flashes('notice') %}
                        <div class="col-md-12 alert alert-warning alert-dismissible fade show" role="alert">
                            <span>{{ message }}</span>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    {% endfor %}
                </div>
                <div class="mt-3">
                    <!-- Lecture des infos -->
                    <div id="lectureInfo" class="row">
                        <div class="col-md-3 mb-2">
                            <img class="img-fluid m-auto preview-avatar" width="100% \9"
                                 src="{% if avatar %}{{ avatar }}{% else %}{{ asset('assets/img/profile/avatar-profile.png') }}{% endif %}" alt="">
                        </div>
                        <div class="col-md-4">
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.nom'|trans }}:
                                <span>{{ last_name }}</span>
                            </p>
                            {# Go to next line #}
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.prenom'|trans }}:
                                <span>{{ first_name }}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.sexe'|trans }}:
                                <span>{{ sexe|trans }}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.date-de-naissance'|trans }}
                                :
                                <span>{{ bdaytime }}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.lieu-de-naissance'|trans }}
                                :
                                <span>{{ birth_place|country_name }}</span>
                            </p>
                        </div>
                        <div class="col-md-4">
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.adresse-email'|trans }}:
                                <span>{{ app.user.getEmailCanonical }}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.telephone'|trans }}:
                                <span>{{ telephone }}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.activite'|trans }}:
                                <span>{% if principal_activity %}{{ principal_activity.description }}{% endif %}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.competence'|trans }}
                                ({{ competence|length }}) :
                                <span>{% for c in competence %}<a href="#" class="badge badge-info mr-1">{{ c }}</a>{% endfor %}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.nom_commercial'|trans }}:
                                <span>{% if nom_commercial == '' %}{{ first_name }}{% else %}{{ nom_commercial }}{% endif %}</span>
                            </p>
                            <p class="user-info-text">{{ 'profil-utilisateur.formulaire-profil.departement'|trans }}:
                                <span>{% if user.getUserUniqueData %}{% for dep in departements %}
                                        {% if user.getUserUniqueData.getDepartement and dep.id == user.getUserUniqueData.getDepartement.id %}{{ dep.departement }}{% endif %}{% endfor %}{% endif %}</span>
                            </p>
                        </div>
                        <div class="col-md-12 mt-4">
                            <!--Accordion wrapper-->
                            <div class="accordion md-accordion  mb-5" id="accordionEx" role="tablist"
                                 aria-multiselectable="true">
                                <!-- Accordion card -->
                                <div class="card">
                                    <!-- Card header -->
                                    <div class="card-header" role="tab">
                                        <a data-toggle="collapse" id="headingOne1" data-parent="#accordionEx"
                                           href="#collapseOne1" aria-expanded="true"
                                           aria-controls="collapseOne1">
                                            <h5 class="mb-0">
                                                <i class="fas fa-plus" style="font-size: 22px; color: black;"
                                                   id="accordion_address">{{ 'profil-utilisateur.formulaire-profil.adresses'|trans }}</i>
                                            </h5>
                                        </a>
                                    </div>

                                    <!-- Card body -->
                                    <div id="collapseOne1" class="collapse md-12" role="tabpanel"
                                         aria-labelledby="headingOne1" data-parent="#accordionEx">
                                        <div class="card-body">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <h3 class="col-md-12">{{ 'profil-utilisateur.formulaire-profil.domicile'|trans }}</h3>
                                                    <div class="md-form">
                                                        <input disabled type="text"
                                                               class="form-control" value="{{ numeroNomRue_domicile }}">
                                                        <label>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-numero-rue'|trans }}</label>
                                                    </div>
                                                    <div class="md-form">
                                                        <input disabled type="text"
                                                               class="form-control" value="{{ codePostal_domicile }}">
                                                        <label>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-code-postal'|trans }}</label>
                                                    </div>
                                                    <div class="md-form">
                                                        <input disabled type="text"
                                                               class="form-control" value="{{ ville_domicile }}">
                                                        <label for="ville">{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-ville'|trans }}</label>
                                                    </div>
                                                    <div class="md-form">
                                                        <input disabled type="text" class="form-control" value="{{ region_domicile }}">
                                                        <label for="region">{{ 'profil-utilisateur.formulaire-profil.region'|trans }}</label>
                                                    </div>

                                                    <div class="md-form">
                                                        <span>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-pays'|trans }}</span>
                                                        <select disabled class="browser-default custom-select">
                                                            <option value="{{ pays_domicile }}">{{ pays_domicile|country_name }}</option>
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="vl"></div>

                                                <div class="col-md-6">
                                                    <h3 class="col-md-12">{{ 'profil-utilisateur.formulaire-profil.livraison'|trans }}</h3>
                                                    <div class="md-form">
                                                        <input disabled type="text" class="form-control" value="{{ numeroNomRue_livraison }}">
                                                        <label>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-numero-rue'|trans }}</label>
                                                    </div>
                                                    <div class="md-form">
                                                        <input disabled type="text"
                                                               class="form-control" value="{{ codePostal_livraison }}">
                                                        <label>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-code-postal'|trans }}</label>
                                                    </div>
                                                    <div class="md-form">
                                                        <input disabled type="text"
                                                               class="form-control" value="{{ ville_livraison }}">
                                                        <label>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-ville'|trans }}</label>
                                                    </div>

                                                    <div class="md-form">
                                                        <input disabled type="text" class="form-control" value="{{ region_livraison }}">
                                                        <label for="region">{{ 'profil-utilisateur.formulaire-profil.region'|trans }}</label>
                                                    </div>
                                                    <div class="md-form">
                                                        <span>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-pays'|trans }}</span>
                                                        <select disabled class="browser-default custom-select">
                                                            <option value="{{ pays_livraison }}">{{ pays_livraison|country_name }}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- Accordion card -->
                            </div>
                            <!-- Accordion wrapper -->
                        </div>
                        <div class="col-md-12 mt-4">
                            <h5>{{ 'profil-utilisateur.formulaire-profil.description'|trans }}</h5>
                            <div class="p-2">
                                <div class="text-box border border-dark p-2" style="min-height:200px;">
                                    {{ description|raw }}
                                </div>
                            </div>
                        </div>
                        <div class="col-md-12 mt-2">
                            <h5>{{ 'profil-utilisateur.formulaire-profil.reference'|trans }}</h5>
                            <div class="p-2">
                                <div class="text-box border border-dark p-2" style="min-height:200px;">
                                    {{ reference|raw }}
                                </div>
                            </div>
                        </div>
                        <div id="monPortfolio" class="col-md-12 my-2">
                            <h5 class="py-4 mb-2">Portfolio ({{ portfolio|length }})</h5>
                            <div class="owl-carousel owl-theme">
                                {% for p in portfolio %}
                                    <div class="item">
                                        <div class="portfolio-bg lazy" data-src="{{ p.guid }}"></div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>

                        <!-- Videos -->
                        <div id="mesVideos" class="col-md-12 my-2">
                            <h5 class="py-4 mb-2">{{ 'profil-utilisateur.formulaire-profil.video'|trans }}
                                ({{ video|length }})</h5>
                            <div class="owl-carousel owl-theme">
                                {% for v in imgid %}
                                    {% if v != '' %}
                                        <div class="item-video" data-merge="3">
                                            <a class="owl-video" href="https://www.youtube.com/embed/{{ v }}"></a>
                                        </div>
                                    {% endif %}
                                {% endfor %}
                            </div>
                        </div>
                        <!-- End of videos -->
                        <div class=" col-md-12 text-right">
                            <div class="row">
                                <div class="col-md-6">
                                    <a id="voirProfile" target="_blank" href="{{ path('profile_detailsProfessionnel',{'id': 'infos-profil-' ~ id}) }}" class="btn btn-md btn-dark float-left">{{ 'profil-utilisateur.formulaire-profil.voir-profil'|trans }}</a>
                                </div>
                                <div class="col-md-6">
                                    <button id="modifierProfile" class="btn btn-md btn-primary float-right">{{ 'profil-utilisateur.formulaire-profil.bouton-modifier'|trans }}</button>
                                </div>
                                {#<div class="col-md-3">
                                    <a id="deleteProfile" data-toggle="modal" data-target="#deleteTarget" class="btn btn-md btn-danger float-right">{{ 'profil-utilisateur.formulaire-profil.bouton-supprimer'|trans }}</a>
                                </div>#}
                            </div>
                        </div>
                    </div>
                    <!-- Fin de lecture -->

                    <!-- Modif des infos -->
                    <div id="modifInfo">
                        <form class="row" action="{{ path('profile_updateProfile') }}" method="post" id="updateProfile"
                              enctype="multipart/form-data">
                            <div class="col-md-4 mb-2">
                                <div id="blah">
                                    <img class="img-fluid m-auto avatar-preview" id="avatar-preview" width="100% \9" src="{% if avatar %}{{ avatar }}{% else %}{{ asset('assets/img/profile/avatar-profile.png') }} {% endif %}">
                                </div>
                                <div class="custom-file">
                                    <label class="custom-file-label" for="imageUpload">
                                        <small>{{ 'profil-utilisateur.formulaire-profil.ajouter-photo-profil'|trans }}</small>
                                    </label>
                                    <input type="file" class="custom-file-input is-valid" id="imageUpload" name="avatar"
                                           lang="{{ app.request.getLocale() }}" accept="image/png,image/jpeg">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="md-form">
                                    <input type="text" id="last_name" required name="last_name" class="form-control"
                                           value="{{ last_name }}">
                                    <label for="last_name">{{ 'profil-utilisateur.formulaire-profil.nom'|trans }}*</label>
                                </div>
                                <input type="text" hidden value="" id="crop_image" name="crop_image">
                                <div class="md-form">
                                    <input type="text" id="first_name" required name="first_name" class="form-control"
                                           value="{{ first_name }}">
                                    <label for="prenom">{{ 'profil-utilisateur.formulaire-profil.prenom'|trans }} *</label>
                                </div>
                                <div class="md-form">
                                    <select id="sexe" name="sexe" required class="browser-default custom-select">
                                        <option value="homme" {% if sexe and sexe =='homme' %} selected {% endif %}>{{ 'general.homme'|trans }}</option>
                                        <option value="femme" {% if sexe and sexe =='femme' %} selected {% endif %}>{{ 'general.femme'|trans }}</option>
                                        <option value="autre" {% if sexe and sexe =='autre' %} selected {% endif %}>{{ 'general.autre'|trans }}</option>
                                    </select>
                                </div>
                                <div class="md-form">
                                    <input autocomplete="disabled" type="text" id="bdaytime"
                                           style="font-size:14px; margin-top:20px" required name="bdaytime"
                                           class="form-control form-control-md inputNaissance"
                                           value="{{ bdaytime|trim }}">
                                    <label for="bdaytime">{{ 'profil-utilisateur.formulaire-profil.date-de-naissance'|trans }} *</label>
                                </div>
                                <div class="md-form">
                                    <span class="mimic-label">{{ 'general.lieu-de-naissance'|trans }}</span>
                                    <select id="birth_place" name="birth_place" required
                                            class="browser-default custom-select">
                                        <option value="{{ birth_place }}">{% if birth_place != '' %}{{ birth_place|country_name }}{% else %}{{ 'general.lieu-de-naissance'|trans }} *{% endif %}
                                        </option>
                                        {% include("countryRegister.html.twig") %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="md-form">
                                    <input type="text" id="telephone" name="telephone" class="form-control"
                                           value="{{ telephone }}">
                                    <label class="active" for="tel">{{ 'profil-utilisateur.formulaire-profil.telephone'|trans }}</label>
                                </div>
                                <div class="md-form">
                                    <input type="email" id="email" required name="email" class="form-control"
                                           value="{{ app.user.getEmailCanonical }}">
                                    <label for="email">{{ 'profil-utilisateur.formulaire-profil.adresse-email'|trans }}
                                        *</label></label>
                                </div>
                                <div class="md-form">
                                    <span class="mimic-label">{{ 'profil-utilisateur.formulaire-profil.activite'|trans }}</span>
                                    <select class='browser-default custom-select' id="activite" name="activite">
                                        <option value="">{{ 'profil-utilisateur.formulaire-profil.activite'|trans }}</option>
                                        {% for item in activities %}
                                            <option {% if principal_activity %}{% if item.termId == principal_activity.termId %}selected{% endif %}
                                                    {% endif %}
                                                    value="{{ item.termId }}">{% if app.request.locale == 'en' %}{{ item.content }}{% else %}{{ item.name }}{% endif %}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="md-form">
                                    <label for="competencesModif"></label>
                                    <h6>{{ 'profil-utilisateur.formulaire-profil.competence'|trans }}</h6>
                                    <input type="text" placeholder="Compétences séparées d'une virgule"
                                           id="competencesModif" class="form-control" name="competence1"
                                           value="{% if competences is not null %} {{ competences.metaValue }} {% endif %}"
                                           data-role="tagsinput">
                                </div>
                                <div class="md-form">
                                    <input type="text" id="nom_commercial" name="nom_commercial" class="form-control"
                                           value="{% if nom_commercial == '' %}{{ first_name }}{% else %}{{ nom_commercial }}{% endif %}">
                                    <label for="nom_commercial">{{ 'profil-utilisateur.formulaire-profil.nom_commercial'|trans }}</label>
                                </div>


                                <div class="md-form">
                                    <span class="mimic-label">{{ 'profil-utilisateur.formulaire-profil.departement'|trans }}</span>
                                    <select class='browser-default custom-select' id="departement" name="departement">
                                        <option value=""></option>
                                        {% for item in departements %}
                                            <option {% if user.getUserUniqueData %}
                                                    {% if user.getUserUniqueData.getDepartement and item.id == user.getUserUniqueData.getDepartement.id %}selected{% endif %}{% endif %}
                                                    value="{{ item.id }}">{{ item.departement }}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-12 mt-4">
                                <!--Accordion wrapper-->
                                <div class="accordion md-accordion  mb-5" id="accordionEx2" role="tablist"
                                     aria-multiselectable="true">
                                    <!-- Accordion card -->
                                    <div class="card">
                                        <!-- Card header -->
                                        <div class="card-header" role="tab">
                                            <a data-toggle="collapse" id="headingOne2" data-parent="#accordionEx2"
                                               href="#collapseOne2" aria-expanded="true"
                                               aria-controls="collapseOne1">
                                                <h5 class="mb-0">
                                                    <i class="fas fa-plus" style="font-size: 22px; color: black;"
                                                       id="accordion_address2">{{ 'profil-utilisateur.formulaire-profil.adresses'|trans }}</i>
                                                </h5>
                                            </a>
                                        </div>

                                        <!-- Card body -->
                                        <div id="collapseOne2" class="collapse md-12" role="tabpanel"
                                             aria-labelledby="headingOne2" data-parent="#accordionEx2">
                                            <div class="card-body">
                                                <div class="row">
                                                    <div class="col-md-6">
                                                        <h3 class="col-md-12">{{ 'profil-utilisateur.formulaire-profil.domicile'|trans }}</h3>
                                                        <div class="md-form">
                                                            <input type="text" id="numeroNomRue_domicile"
                                                                   name="numeroNomRue_domicile"
                                                                   class="form-control" value="{{ numeroNomRue_domicile }}">
                                                            <label for="numeroNomRue_domicile">{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-numero-rue'|trans }}</label>
                                                        </div>
                                                        <div class="md-form">
                                                            <input type="text" id="codePostal_domicile"
                                                                   name="codePostal_domicile"
                                                                   class="form-control" value="{{ codePostal_domicile }}">
                                                            <label for="codePostal_domicile">{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-code-postal'|trans }}</label>
                                                        </div>
                                                        <div class="md-form">
                                                            <input type="text" id="ville_domicile" name="ville_domicile"
                                                                   class="form-control" value="{{ ville_domicile }}">
                                                            <label for="ville_domicile">{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-ville'|trans }}</label>
                                                        </div>


                                                        <div class="md-form">
                                                            <input type="text" id="region_domicile" name="region_domicile" class="form-control" value="{{ region_domicile }}">
                                                            <label for="region_domicile">{{ 'profil-utilisateur.formulaire-profil.region'|trans }}</label>
                                                        </div>

                                                        <div class="md-form">
                                                            <span>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-pays'|trans }}</span>
                                                            <select id="pays_domicile" name="pays_domicile"
                                                                    class="browser-default custom-select">
                                                                {% if pays_domicile != '' %}
                                                                    <option value="{{ pays_domicile }}">{{ pays_domicile|country_name }}</option>
                                                                    {% include 'countryRegister.html.twig' %}
                                                                {% else %}
                                                                    {% include 'countryDefault.html.twig' %}
                                                                {% endif %}
                                                            </select>
                                                        </div>
                                                    </div>

                                                    <div class="vl"></div>

                                                    <div class="col-md-6">
                                                        <h3 class="col-md-12">{{ 'profil-utilisateur.formulaire-profil.livraison'|trans }}</h3>
                                                        <div class="md-form">
                                                            <input type="text" id="numeroNomRue_livraison"
                                                                   name="numeroNomRue_livraison" class="form-control"
                                                                   value="{% if numeroNomRue_livraison is not null %}{{ numeroNomRue_livraison }}{% endif %}">
                                                            <label for="numeroNomRue_livraison">{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-numero-rue'|trans }}</label>
                                                        </div>
                                                        <div class="md-form">
                                                            <input type="text" id="codePostal_livraison"
                                                                   name="codePostal_livraison" class="form-control"
                                                                   value="{{ codePostal_livraison }}">
                                                            <label for="codePostal_livraison">{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-code-postal'|trans }}</label>
                                                        </div>
                                                        <div class="md-form">
                                                            <input type="text" id="ville_livraison"
                                                                   name="ville_livraison" class="form-control"
                                                                   value="{{ ville_livraison }}">
                                                            <label for="ville_livraison">{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-ville'|trans }}</label>
                                                        </div>

                                                        <div class="md-form">
                                                            <input type="text" id="region_livraison" name="region_livraison" class="form-control" value="{{ region_livraison }}">
                                                            <label for="region_livraison">{{ 'profil-utilisateur.formulaire-profil.region'|trans }}</label>
                                                        </div>

                                                        <div class="md-form">
                                                            <span>{{ 'profil-utilisateur.fournisseurs.formulaire-details-facture-pays'|trans }}</span>
                                                            <select id="pays_livraison" name="pays_livraison"
                                                                    class="browser-default custom-select">
                                                                {% if pays_livraison != '' %}
                                                                    <option value="{{ pays_livraison }}">{{ pays_livraison|country_name }}</option>
                                                                    {% include 'countryRegister.html.twig' %}
                                                                {% else %}
                                                                    {% include 'countryDefault.html.twig' %}
                                                                {% endif %}
                                                            </select>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Accordion card -->
                                </div>
                                <!-- Accordion wrapper -->
                            </div>
                            <div class="col-md-12 mt-4">
                                <h5>{{ 'profil-utilisateur.formulaire-profil.description'|trans }}</h5>
                                <div class="form-group">
                                <textarea class="form-control border-dark" id="description" name="description"
                                          rows="7">{{ description }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12 mt-2">
                                <h5>{{ 'profil-utilisateur.formulaire-profil.reference'|trans }}</h5>
                                <div class="form-group">
                                <textarea class="form-control border-dark" id="reference" name="reference" rows="7">{{ reference }}</textarea>
                                </div>
                            </div>
                            <div class="col-md-12 mt-2">
                                <h5>Portfolio</h5>
                                <div class="form-group">
                                    <div class="p-2">
                                        <div class="border border-dark p-2">
                                            <div class="row">
                                                <div class="col-md-12 d-flex justify-content-center">
                                                    <ul class="portfolio-ul">
                                                        {% if portfolio %}
                                                            {% for p in portfolio %}
                                                                <li style="background-image: url({{ p.guid }});"
                                                                    class="aimg">
															<span>
																<a href="{{ path('profile_delete_portfolio', {'id':p.id}) }}"
                                                                   class="delete_port ld-over-inverse"
                                                                   style="color:#fff">Supprimer
																<i class="ld ld-ring ld-spin"></i>
																</a>
															</span>
                                                                </li>
                                                            {% endfor %}
                                                        {% endif %}
                                                    </ul>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <h6 class="control-label col-md-3">{{ 'general.add-portfolio'|trans }}</h6>
                                                <div class="col-md-8">
                                                    <div class="row">
                                                        <div id="coba" class="row"></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-12 mt-2">
                                <h5>{{ 'profil-utilisateur.formulaire-profil.video'|trans }}</h5>
                                <div class="p-2">
                                    <div class="border border-dark p-2">
                                        <div class="row">
                                            <div class="col-md-12 d-flex justify-content-center">
                                                <ul class="videos-ul">
                                                    {% for v in imgid %}
                                                        {% if v != '' %}
                                                            <li style="background-image: url('https://img.youtube.com/vi/{{ v }}/0.jpg');"
                                                                class="aimg">
														<span>
															<a href="{{ path('profile_delete_video',{'id':v}) }}"
                                                               class="delete_port ld-over-inverse" style="color:#fff">
															Supprimer
															<i class="ld ld-ring ld-spin"></i>
															</a>
														</span>
                                                            </li>
                                                        {% endif %}
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                        <div id="newVideos" class="row mt-3">
                                            <div class="col-md-3">
                                                <h6>{{ 'general.add-youtube-link'|trans }}</h6>
                                            </div>
                                            <div class="col-md-9">
                                                <div id="newVideosRow" class="row">
                                                    <div class="col-md-4">
                                                        <div class="md-form">
                                                            <input type="text"
                                                                   pattern="^(http(s)?:\/\/)?((w){3}.)?youtu(be|.be)?(\.com)?\/.+"
                                                                   class="form-control border p-2" name="new_vid[]"
                                                                   placeholder="Add new YouTube video link">
                                                        </div>
                                                        <a id="addScnt" href="#"
                                                           class="btn btn-md btn-warning">{{ 'general.add'|trans }}</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="offset-md-6 col-md-6">
                                <div class="row">
                                    <div class="col">
                                        <button id="send" type="submit"
                                                class="btn btn-md btn-success ld-over-inverse ">{{ 'profil-utilisateur.formulaire-modification-profil.bouton-modifier'|trans }}
                                            <i class="ld ld-ring ld-spin"></i>
                                        </button>
                                    </div>
                                    <div class="col">
                                        <button id="annulerModif" type="button" class="btn btn-md btn-warning">{{ 'profil-utilisateur.formulaire-modification-profil.bouton-annuler'|trans }}</button>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <!-- Fin des modifs -->
                    <!-- Crop modal -->
                    <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="modalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg" role="document">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Redimensionner votre image et enregistrer</h5>
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                        <span aria-hidden="true">×</span>
                                    </button>
                                </div>
                                <div class="modal-body">
                                    <div class="img-container px-3">
                                        <div class="row">
                                            <div class="col-md-8" style="margin: inherit;">
                                                <img src="" id="sample_image" />
                                            </div>
                                            <div class="col-md-4 image-bloc">
                                                <div class="preview"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-warning cancel" data-dismiss="modal"><b>Annuler</b></button>
                                    <button type="button" id="crop" class="btn btn-primary approve"><b>Enregistrer</b></button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Crop modal -->
                </div>
            </div>

            {% include("partials/project.html.twig") %}
            {% include("partials/otherPagesVideoModal.html.twig") %}
        </main>
    </div>
{% endblock %}
	{% block footer %}
        {{ parent() }}<!-- Modal for supprimer -->
        <div class="modal fade right" id="deleteTarget" tabindex="-1" role="dialog" aria-labelledby="deleteTarget"
             aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="row">
                        <div class="col-md-6 px-0" style="background-size: cover">
                            <img src="{{ asset('assets/img/modal/img-log.png') }}" alt="" class="img-fluid"
                                 style="width: fit-content">
                        </div>
                        <div class="col-md-6 px-0 right-section-modal">
                            <div class="modal-header border-bottom-0">
                                <h5 class="modal-title"
                                    id="exampleModalPreviewLabel">{{ 'profil-utilisateur.liens.effacer-compte'|trans }}</h5>
                            </div>
                            <div class="modal-body"
                                 style='padding-left: 1rem;padding-right: 1rem; padding-top: 0rem; padding-bottom: 0rem;'>
                                <div class="effacer-definitivement">
                                    <div>
                                        <input type="checkbox" id="horns" name="horns"/>
                                    </div>
                                    <div>
                                        <label for="horns">{{ 'profil-utilisateur.liens.effacer-compte-donnees'|trans }}</label>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-footer border-top-0 pb-0">
                                <div class="btn-group btn-group-lg" role="group" aria-label="Basic example">
                                    <button type="button" class="btn btn-lg firstletter-capital logout-no"
                                            data-dismiss="modal">{{ 'general.non'|trans }}</button>
                                    <button type="button"
                                            class="btn btn-lg btn-primary firstletter-capital logout-yes delete_port2">{{ 'general.oui'|trans }}</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div><!-- Modal -->
        <input id="hornsUrlDelete" hidden value="{{ path('profile_delete_profil',{id:id}) }}"/>
        <input id="hornsUrlDeleteAll" hidden value="{{ path('profile_delete_profil_all',{id:id}) }}"/>
    {% endblock %}

{% block javascripts %}
    {{ parent() }}
    <!-- jQuery plugin for camroll slider -->
    <script type="text/javascript" src="{{ asset('assets/js/camroll/camroll_slider.js') }}">
    </script><!-- jQuery plugin for spartan image picker -->
    <script type="text/javascript"
            src="{{ asset('assets/js/spartan-image-picker/spartan-multi-image-picker-min.js') }}">
    </script><!-- jQuery plugin for input tags -->
    <script src="{{ prerender(asset('assets/js/tagsinput/jQuery.tagify.min.js')) }}"></script>
    <script src="{{ asset('toastr/toastr.min.js') }}"></script><!-- jQuery plugin for datepicker -->
    <script src="{{ asset('assets/js/gijgo-js/gijgo.min.2.js') }}"></script>
    <script src="{{ asset('assets/phone/js/intlTelInput.min.js') }}"></script>
    <script src="{{ asset('admin/assets/sweetalert/sweetalert.min.js') }}"></script>
    <!-- Tinymce editor -->
    <script type="text/javascript" src='{{ asset('admin/tinymce/js/tinymce/tinymce.min.js') }}'></script>
    <!-- owl carousel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>

    <!-- Crop cdn -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js" integrity="sha512-6lplKUSl86rUVprDIjiW8DuOniNX8UDoRATqZSds/7t6zCQZfaCe3e5zcGaQwxa8Kpn5RTM9Fvl3X2lLV4grPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- cdnjs for lazy load -->
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazy/1.7.9/jquery.lazy.min.js"></script>
    <script type="text/javascript"
            src="https://cdnjs.cloudflare.com/ajax/libs/jquery.lazy/1.7.9/jquery.lazy.plugins.min.js"></script>
    <script>
        function getUnique(array) {
            var uniqueArray = [];
            // Loop through array values
            for (i = 0; i < array.length; i++) {
                if (uniqueArray.indexOf(array[i]) === -1) {
                    uniqueArray.push(array[i]);
                }
            }
            return uniqueArray;
        }

        function validateEmail(email) {
            var re = /^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
            return re.test(email);
        }

        function validatePhoneNumber(phone) {
            var re = /^(\+|00)[0-9]{1,3}[0-9 ]{4,20}(?:x.+)?$/;
            return re.test(phone);
        }

        // pattern="^(6|2)[. ]{0,1}[0-9 .]{8,13}(?:x.+)?$"

        //Accordeon1 and 2

        $('#headingOne1').click(function () {
            let accordion = $(this).find('i');

            if (accordion.attr("class").split(/\s+/).includes('fa-plus')) {
                accordion.removeClass('fa-plus');
                accordion.addClass('fa-minus');
            } else {
                accordion.removeClass('fa-minus');
                accordion.addClass('fa-plus');
            }
        });

        $('#headingOne2').click(function () {
            let accordion = $(this).find('i');

            if (accordion.attr("class").split(/\s+/).includes('fa-plus')) {
                accordion.removeClass('fa-plus');
                accordion.addClass('fa-minus');
            } else {
                accordion.removeClass('fa-minus');
                accordion.addClass('fa-plus');
            }
        });
        //End Accordeon1
        $(document).ready(function () {
            let docWidth = document.documentElement.offsetWidth;
            tinymce.init({
                selector: 'textarea#description',
                height: 250,
                plugins: [
                    'advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker', 'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking', 'save table contextmenu directionality emoticons template paste textcolor'
                ],

                toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons',
                browser_spellcheck: true,
                contextmenu: false,{% if app.request.locale=='fr' %}
                language: 'fr_FR',{% endif %}
            });
            tinymce.init({
                selector: 'textarea#reference',
                height: 250,
                plugins: [
                    'advlist autolink link image lists charmap print preview hr anchor pagebreak spellchecker', 'searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking', 'save table contextmenu directionality emoticons template paste textcolor'
                ],

                toolbar: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media fullpage | forecolor backcolor emoticons',
                browser_spellcheck: true,
                contextmenu: false,{% if app.request.locale=='fr' %}
                language: 'fr_FR',{% endif %}
            });

            [].forEach.call(document.querySelectorAll('*'), function (el) {
                if (el.offsetWidth > docWidth) {
                }
            });


            $(function () {
                $('.lazy').lazy();
            });

            $("[for=tel]").addClass("active");
// Portfolio owlcarousel
            $('#monPortfolio .owl-carousel').owlCarousel({
                items: 1,
                nav: true,
                lazyLoad: true,
                loop: true,
                margin: 10
            });
// Video owlcarousel
            $('#mesVideos .owl-carousel').owlCarousel({
                items: 1,
                merge: true,
                loop: true,
                margin: 10,
                nav: true,
                video: true,
                lazyLoad: false,
                center: true,
                /* responsive:{
                              480:{
                                  items:2
                              },
                              600:{
                                  items:2
                              }
                          }*/
            });


// add/remove new video in the update section
            let scntDiv = $('#newVideosRow');
            let i = $('#newVideosRow .col-md-4').length + 1;

            $('#addScnt').on('click', function () {
                $('<div class="col-md-4"><div class="md-form"> <input type="url" class="form-control border p-2" name="new_vid[]" placeholder="{{ "general.add-youtube-link"|trans }}"><div class="valid-feedback">OK!</div><div class="invalid-feedback">Ce champ contient une erreur!</div></div> <a class="btn btn-md btn-danger" id="retirerSec">         {{ "general.supprimer"|trans }}</a></div>').appendTo(scntDiv);
                i++;
            });

            $('#newVideosRow').on('click', '#retirerSec', function () {
                $(this).parents('.col-md-4').remove();
                i--;
            });

// add new portfolio images
            $("#coba").spartanMultiImagePicker({
                fieldName: 'file[]',
                status: false,
                loaderIcon: '<i class="fas fa-sync fa-spin"></i>',
                maxFileSize: '1048576',
                url: $("#containerForPortfolio").attr("addPortfolioUrl"),
                additionalParam: {
                    name: 'portfolios[]'
                },
                onSizeErr: function (index, file) {
                    toastr.clear();
                    toastr.warning("{{ 'systeme.requetes.taille_fichier'|trans }}");
                },
                onRemoveRow: function (index) {
                }
            });
// Hambuger menu icon
            $('.animated-button-icon').on('click', function () {
                $('.animated-icon2').toggleClass('open');
            });
// first thing turn Hide Menu Search bar
            $("#searchMenu").hide();
// toggle menu search bar on/off
            $("#searchMenuShowHide").click(function () {
                $("#searchMenu").toggle("slide");
            });

// first thing turn Hide "Update section" input field
            $("#modifInfo").hide();
// toggle on/off using "Mofier mon profile"
            $("#modifierProfile").click(function () {
                $("#lectureInfo").toggle("slide");
                $("#modifInfo").toggle("slide");
            });
// toggle on/off using "Annuler les modification"
            $("#annulerModif").click(function () {
                $("#modifInfo").toggle("slide");
                $("#lectureInfo").toggle("slide");

            });

            $('#date').datepicker({
                uiLibrary: 'bootstrap4',
                size: 'large',
                showRightIcon: false,
                iconsLibrary: 'fontawesome'
            });

            $("div[role='wrapper']").append("<div class='valid-feedback'>OK!</div><div class='invalid-feedback'>Ce champ contient une erreur!</div>");


// Validate fields
// Date format
            $('.inputNaissance').datepicker({
                uiLibrary: 'bootstrap4',
                size: 'large',
                showRightIcon: false,
                iconsLibrary: 'fontawesome',
                format: 'mm/dd/yyyy',
                label: false
            });
// First Name
            $("#first_name").change(function () {
                let first_name = $("#first_name").val();
                if (isNaN(first_name)) {
                    $("#first_name").removeClass("is-invalid");
                    $("#first_name").addClass("is-valid");
                } else {
                    $("#first_name").removeClass("is-valid");
                    $("#first_name").addClass("is-invalid");
                }
            });

// Last Name
            $("#last_name").change(function () {
                let last_name = $("#last_name").val();
                if (isNaN(last_name)) {
                    $("#last_name").removeClass("is-invalid");
                    $("#last_name").addClass("is-valid");
                } else {
                    $("#last_name").removeClass("is-valid");
                    $("#last_name").addClass("is-invalid");
                }
            });

            $("#sexe").change(function () {
                let sexe = $("#sexe").val();
                if (isNaN(sexe)) {
                    $("#sexe").removeClass("is-invalid");
                    $("#sexe").addClass("is-valid");
                } else {
                    $("#sexe").removeClass("is-valid");
                    $("#sexe").addClass("is-invalid");
                }
            });


            $("#email").keyup(function () {
                let email = $("#email").val();
                if (validateEmail(email)) {
                    $("#email").removeClass("is-invalid");
                    $("#email").addClass("is-valid");
                } else {
                    $("#email").removeClass("is-valid");
                    $("#email").addClass("is-invalid");
                }
            });

            $("#telephone").keyup(function () {
                let phone = $("#telephone").val().replace(/\s|[a-zA-Z]/g, "");
                $("#telephone").val(phone);
                if (validatePhoneNumber(phone)) {
                    $("#telephone").removeClass("is-invalid");
                    $("#telephone").addClass("is-valid");
                } else {
                    $("#telephone").removeClass("is-valid");
                    $("#telephone").addClass("is-invalid");
                }
            });

            $("#bdaytime").change(function () {
                let bdaytime = $("#bdaytime").val().replace(/\s|[a-zA-Z]/g, "");
                $("#bdaytime").val(bdaytime);
                if (bdaytime != '') {
                    $("#bdaytime").removeClass("is-invalid");
                    $("#bdaytime").addClass("is-valid");
                } else {
                    $("#bdaytime").removeClass("is-valid");
                    $("#bdaytime").addClass("is-invalid");
                }
            });

            $("#birth_place").change(function () {
                let birth_place = $("#birth_place").val();
                if (isNaN(birth_place)) {
                    $("#birth_place").removeClass("is-invalid");
                    $("#birth_place").addClass("is-valid");
                } else {
                    $("#birth_place").removeClass("is-valid");
                    $("#birth_place").addClass("is-invalid");
                }
            });

            $("#raison_sociale").keyup(function () {
                let nom = $("#raison_sociale").val();
                if (isNaN(nom)) {
                    $("#raison_sociale").removeClass("is-invalid");
                    $("#raison_sociale").addClass("is-valid");
                } else {
                    $("#raison_sociale").removeClass("is-valid");
                    $("#raison_sociale").addClass("is-invalid");
                }
            });

            $("#siret").keyup(function () {
                let nom = $("#siret").val();
                if (isNaN(nom)) {
                    $("#siret").removeClass("is-invalid");
                    $("#siret").addClass("is-valid");
                } else {
                    $("#siret").removeClass("is-valid");
                    $("#siret").addClass("is-invalid");
                }
            });

            $("#tva").change(function () {
                let nom = $("#tva").val();
                if (isNaN(nom)) {
                    $("#tva").removeClass("is-invalid");
                    $("#tva").addClass("is-valid");
                } else {
                    $("#tva").removeClass("is-valid");
                    $("#tva").addClass("is-invalid");
                }
            });
//Code postal livraison et domicile
            $("#codePostal_livraison").keyup(function () {
                let codePostal_livraison = $("#codePostal_livraison").val().replace(/\s/g, "");
                $("#codePostal_livraison").val(codePostal_livraison);
                if (codePostal_livraison != '') {
                    $("#codePostal_livraison").removeClass("is-invalid");
                    $("#codePostal_livraison").addClass("is-valid");
                } else {
                    $("#codePostal_livraison").removeClass("is-valid");
                    $("#codePostal_livraison").addClass("is-invalid");
                }
            });

            $("#codePostal_domicile").keyup(function () {
                let codePostal_domicile = $("#codePostal_domicile").val().replace(/\s/g, "");
                $("#codePostal_domicile").val(codePostal_domicile);
                if (codePostal_domicile != '') {
                    $("#codePostal_domicile").removeClass("is-invalid");
                    $("#codePostal_domicile").addClass("is-valid");
                    $("#codePostal_livraison").val(codePostal_domicile);
                    $("[for=codePostal_livraison]").addClass("active");
                } else {
                    $("#codePostal_domicile").removeClass("is-valid");
                    $("#codePostal_domicile").addClass("is-invalid");
                }
            });

            $("#ville_domicile").keyup(function () {
                $("#ville_livraison").val($("#ville_domicile").val());
                $("[for=ville_livraison]").addClass("active");
            });

            $("#region_domicile").keyup(function () {
                $("#region_livraison").val($("#region_domicile").val());
                $("[for=region_livraison]").addClass("active");
            });

            $("#numeroNomRue_domicile").keyup(function () {
                $("#numeroNomRue_livraison").val($("#numeroNomRue_domicile").val());
                $("[for=numeroNomRue_livraison]").addClass("active");
            });

            $("#numeroNomRue_domicile").keyup(function () {
                $("#numeroNomRue_livraison").val($("#numeroNomRue_domicile").val());
                $("[for=numeroNomRue_livraison]").addClass("active");
            });

            let $modal = $('#modal');
            let image = document.getElementById('sample_image');
            let crop_image = "";
            let cropper;

            document.getElementById('imageUpload').addEventListener('change', function (event) {
                let fileInput = event.target;
                let file = fileInput.files[0];
                let files = event.target.files;
                let message_size = '';
                if (fileInput.files.length !== 0 && file.size > 1048576) {
                    fileInput.value = "";
                    message_size = "{{ 'systeme.requetes.taille_fichier_avatar'|trans }}";
                    toastr.warning(message_size);
                }else if(fileInput.files.length !== 0 && file.size < 1048576){
                    //Handle crop
                    let done = function(url){
                        image.src = url;
                        $modal.modal('show');
                    };
                    const reader = new FileReader();
                    reader.onload = function(event)
                    {
                        done(reader.result);
                    };
                    reader.readAsDataURL(files[0]);
                }
            });

            $modal.on('shown.bs.modal', function() {
                let cropper = new Cropper(image, {
                    aspectRatio: 1,
                    viewMode: 3,
                    preview:'.preview'
                });
            }).on('hidden.bs.modal', function(){
                cropper.destroy();
                cropper = null;
                $('#imageUpload').val('');
            });

            $('#crop').click(function(){
                canvas = cropper.getCroppedCanvas({
                    width:400,
                    height:400
                });

                canvas.toBlob(function(blob){
                    url = URL.createObjectURL(blob);
                    let reader = new FileReader();
                    reader.readAsDataURL(blob);
                    reader.onloadend = function(){
                        let base64data = reader.result;

                        $('#blah').html('<img class="img-fluid m-auto avatar-preview" id="avatar-preview" style="max-height:400px" width="100%" src="' + url  + '" >');
                        crop_image = base64data;
                        $modal.modal('hide');
                    };
                });
            });

            // input tags
            $('#competencesModif').tagify();

            $('#updateProfile').on('submit', function (e) { // On emp�che le navigateur de soumettre le formulaire
                e.preventDefault();
                $('#crop_image').val(crop_image);
                $('#telephone').val($('#telephone').val().replace(/\s/g, ''));

                $('#send').addClass('running');
                toastr.info("{{ 'systeme.requetes.requete-en-cours'|trans }}");

                let $form = $(this);
                let formdata = (window.FormData) ? new FormData($form[0]) : null;
                let data = (formdata !== null) ? formdata : $form.serialize();
                $.ajax({
                    url: $form.attr('action'),
                    type: $form.attr('method'),
                    contentType: false,
                    processData: false,
                    data: data,
                    success: function (response) {
                        console.log(response);
                        if (response.result == 1) {
                            toastr.clear();
                            toastr.success("{{ 'systeme.requetes.succes'|trans }}");
                            window.location = "";
                        }
                        if (response.result == 2) {
                            toastr.clear();
                            toastr.error('noticeErrorDate', 'La date de naissance n\'est pas conforme au format attentu; Veuillez mettre a jour votre profil.');
                            window.location = "";
                        } else if (response.result == 0) {
                            $('#send').removeClass('running');
                            toastr.clear();
                            toastr.error("{{ 'systeme.requetes.erreur'|trans }}");
                        }
                    },
                    error: function (response) {
                        //console.log(response);
                        $('#send').removeClass('running');
                        toastr.clear();
                        toastr.error("{{ 'general.error'|trans }}");
                    }
                });
                return false;
            });

            $(document).on('click', '.delete_port', function (e) { // On emp�che le navigateur de soumettre le formulaire
                e.preventDefault();
                let t = $(this);
                let urlPath = $(this).attr('href');
                swal({
                    title: "Suppression de l'objet",
                    text: "Attention l'objet sera Supprimé et n'apparaitra plus sur le site",
                    type: "info",
                    showCancelButton: true,
                    confirmButtonClass: "btn-danger",
                    confirmButtonText: "Supprimer",
                    cancelButtonText: "Annuler",
                    closeOnConfirm: false,
                    closeOnCancel: false,
                    showLoaderOnConfirm: true
                }, function (isConfirm) {
                    if (isConfirm) {
                        $.ajax({
                            url: urlPath,
                            type: 'GET',
                            success: function (response) {
                                if (response == 1) {
                                    swal("suppression terminée", "", "success");
                                    t.parents('li').hide();
                                } else {
                                    swal("erreur de suppression", "", "error");
                                }
                            },
                            error: function (response) {
                                swal("erreur de suppression", "", "error");
                            }
                        });
                    } else {
                        swal.close();
                    }
                });
            });

            $(document).on('click', '.delete_port2', function (e) {
                let urlPath = '';
                e.preventDefault();
                toastr.info("{{ 'systeme.compte.en-cours'|trans }}");
                if ($('#horns:checkbox:checked').length > 0) {
                    urlPath = $("#hornsUrlDeleteAll").val();
                } else {
                    urlPath = $("#hornsUrlDelete").val();
                }
                $.ajax({
                    url: urlPath,
                    type: 'POST',
                    success: function (response) {
                        if (response > 0) {
                            toastr.clear();
                            toastr.success("{{ 'systeme.compte.succes'|trans }}");
                            window.setTimeout(function () {
                                window.location = "{{ path('app_login') }}";
                            }, 200);
                        }
                    },
                    error: function (response) {
                        toastr.clear();
                        toastr.error("{{ 'systeme.compte.error'|trans }}");
                    }
                });
            });

            toastr.options = {
                "closeButton": true,
                "debug": false,
                "newestOnTop": false,
                "progressBar": true,
                "positionClass": "toast-top-center",
                "preventDuplicates": false,
                "onclick": null,
                "showDuration": "1600",
                "closeDuration": "1600",
                "timeOut": "2000",
                "extendedTimeOut": "2200",
                "showEasing": "swing",
                "hideEasing": "linear",
                "showMethod": "fadeIn",
                "hideMethod": "fadeOut"
            }

            let input = document.querySelector("#telephone");
            window.intlTelInput(input, {
                autoHideDialCode: true,
                initialCountry: "fr",
                nationalMode: false,
                formatOnDisplay: false,
                // separateDialCode: true,
                utilsScript: "/assets/phone/js/utils.js"
            });

        });
    </script>
{% endblock %}
